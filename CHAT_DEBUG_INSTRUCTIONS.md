# –û—Ç–ª–∞–¥–∫–∞ —Å–∏—Å—Ç–µ–º—ã —á–∞—Ç–∞ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —á–∞—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
- "–ó–∞–≥—Ä—É–∑–∫–∞..." –≤–º–µ—Å—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –ù–µ –≤–∏–¥–Ω—ã –∏–º—è, —Ñ–∞–º–∏–ª–∏—è –∏ –ø–æ—á—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üõ†Ô∏è –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã SQL –∑–∞–ø—Ä–æ—Å—ã
- –ó–∞–º–µ–Ω–µ–Ω—ã `user:profiles(*)` –Ω–∞ `user:profiles!chats_user_id_fkey(...)`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –¥–ª—è —Å–≤—è–∑–µ–π
- –£–∫–∞–∑–∞–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–∞—Ç–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## üìã –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
- F12 ‚Üí Console
- –ò–ª–∏ Ctrl+Shift+I ‚Üí Console

### 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- `/admin/support`

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
```
Loaded chats: [...]
Raw chat data: [...]
Processed chats: [...]
Chat data: {...}
Loaded messages: [...]
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã:
- `user` –æ–±—ä–µ–∫—Ç —Å `email`, `first_name`, `last_name`
- `messages` –º–∞—Å—Å–∏–≤ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- `sender` –æ–±—ä–µ–∫—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞ "relation does not exist", –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- –ù–∞–∑–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ù–∞–∑–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π
- –°—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö
–ï—Å–ª–∏ `user: null`, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ç–∞–±–ª–∏—Ü–µ `profiles`
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Å–≤—è–∑–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã `chats` –∏ `profiles`
- –ï—Å—Ç—å –ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ `profiles`

### 3. –û—à–∏–±–∫–∏ SQL
–ï—Å–ª–∏ –µ—Å—Ç—å SQL –æ—à–∏–±–∫–∏, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–∞–º
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü

## üîß –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. **–°—Ä–∞–≤–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ** —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É** —Ç–∞–±–ª–∏—Ü –≤ Supabase
4. **–£–±–µ–¥–∏—Ç–µ—Å—å** —á—Ç–æ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üìù –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

```json
{
  "id": "chat-uuid",
  "user_id": "user-uuid",
  "subject": "–í–æ–ø—Ä–æ—Å –ø–æ –∑–∞–∫–∞–∑—É",
  "status": "open",
  "user": {
    "id": "user-uuid",
    "email": "user@example.com",
    "first_name": "–ò–≤–∞–Ω",
    "last_name": "–ò–≤–∞–Ω–æ–≤"
  },
  "messages": [
    {
      "id": "message-uuid",
      "sender_id": "user-uuid",
      "text": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!",
      "sender": {
        "id": "user-uuid",
        "email": "user@example.com",
        "first_name": "–ò–≤–∞–Ω",
        "last_name": "–ò–≤–∞–Ω–æ–≤"
      }
    }
  ]
}
``` 